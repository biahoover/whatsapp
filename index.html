<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>;Bia Hoover</title>
    <link rel="icon" href="©2024 Bianca Hoover..png" type="image/png">

    <style>
        body {
            background-image: url('©2024 Bianca Hoover..png');
            background-size: cover;
            background-position: center;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .inactive {
            background-color: gray;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: not-allowed;
        }
        .active {
            background-color: green;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            animation: pulse 1s infinite alternate; /* Adiciona animação de pulsação */
        }
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            100% {
                transform: scale(1.05);
            }
        }
    </style>
</head>
<body>
    <button id="whatsappButton" class="inactive">Online no Whatsapp em:<br><span id="countdown"></span></button>

    <!-- Código Pixel do Facebook -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '951503763143037');
        fbq('track', 'PageView_WTelegram');
    </script>

    <script>
        // Função para obter a hora atual
        function getCurrentTime() {
            return new Date().getHours();
        }

        // Função para verificar se está dentro do horário ativo
        function isWithinActiveHours() {
            const currentHour = getCurrentTime();
            return currentHour >= 8 && currentHour < 23;
        }

        // Função para atualizar o botão de acordo com o horário
        function updateButtonStatus() {
            const whatsappButton = document.getElementById('whatsappButton');
            if (isWithinActiveHours()) {
                whatsappButton.classList.remove('inactive');
                whatsappButton.classList.add('active');
                whatsappButton.innerHTML = 'FALE COMIGO NO WHATSAPP ♥';
            } else {
                whatsappButton.classList.remove('active');
                whatsappButton.classList.add('inactive');
                const countdownElement = document.getElementById('countdown');
                countdownElement.innerHTML = 'Tempo restante: ' + calculateTimeUntilActive();
            }
        }

        // Função para calcular o tempo restante até o horário ativo
        function calculateTimeUntilActive() {
            const currentHour = getCurrentTime();
            const hoursUntilActive = currentHour < 8 ? 8 - currentHour : 31 - currentHour;
            const minutesUntilActive = (60 - new Date().getMinutes()) * 60 * 1000;
            const millisecondsUntilActive = hoursUntilActive * 60 * 60 * 1000 + minutesUntilActive;
            return new Date(millisecondsUntilActive).toISOString().substr(11, 8);
        }

        // Função para redirecionar para um link de WhatsApp
        function redirectToWhatsApp(whatsappLink) {
            // Redirecionar para o link fornecido
            window.location.href = whatsappLink;
            // Registrar o dispositivo, localização e link de WhatsApp no Google Planilhas
            addToGoogleSheets(deviceId, location, whatsappLink);
        }

        // Função para adicionar dados à planilha do Google Sheets
        function addToGoogleSheets(deviceId, location, whatsappLink) {
            const apiKey = 'AIzaSyDkoePq6cUwgr-CxxwxzvDGoegOijSb_z0';
            const spreadsheetId = '1P8JL42OOl1zdy1pBJvDaTIKunUHAUw8br-ZS4MjM7ds';
            const range = 'A1:C1'; // Intervalo onde os dados serão adicionados

            const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${range}:append?valueInputOption=RAW&key=${apiKey}`;

            const data = {
                values: [
                    [deviceId, location, whatsappLink]
                ]
            };

            fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => {
                if (response.ok) {
                    console.log('Dados adicionados com sucesso à planilha!');
                } else {
                    console.error('Erro ao adicionar dados à planilha:', response.statusText);
                }
            })
            .catch(error => {
                console.error('Erro ao adicionar dados à planilha:', error);
            });
        }

        // Adicione um evento de clique ao botão de WhatsApp
        document.getElementById('whatsappButton').addEventListener('click', function() {
            const whatsappLinks = [
                'https://typebot.co/tbh1',
                'https://typebot.co/tbh3',
                'https://typebot.co/tbh5',
                'https://typebot.co/tbh6'
            ];
            // Obter o link de WhatsApp do Google Planilhas com base no dispositivo e na localização do cliente
            const chosenWhatsAppLink = // Obtenha o link de WhatsApp armazenado no Google Planilhas
            redirectToWhatsApp(chosenWhatsAppLink);
        });

        // Atualize o status do botão quando a página carregar
        window.onload = function() {
            updateButtonStatus();
            // Atualize o status do botão a cada minuto
            setInterval(updateButtonStatus, 60000);
        };
    </script>
</body>
</html>
