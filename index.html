<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bia Hoover</title>
    <link rel="icon" href="©2024 Bianca Hoover..png" type="image/png">

    <style>
        /* Estilos CSS */
    </style>
</head>
<body>
    <!-- Botão do WhatsApp -->
    <button id="whatsappButton" class="whatsapp-button" onclick="redirectToWhatsApp()">
        FALE COMIGO NO WHATSAPP ♥
        <div id="countdown" class="countdown"></div>
    </button>

    <!-- Script JavaScript -->
    <script>
        // Função para redirecionar ao WhatsApp
        function redirectToWhatsApp() {
            var whatsappLink;
            var deviceID = getDeviceID(); // Obtém o ID do dispositivo

            // Verifica de onde o cliente está acessando e define os links do WhatsApp correspondentes
            switch (getAccessChannel()) {
                case 'Facebook':
                    whatsappLink = getWhatsAppLink(deviceID, ['fbh1', 'fbh3', 'fbh5', 'fbh6']);
                    break;
                case 'Instagram':
                    whatsappLink = getWhatsAppLink(deviceID, ['ibh1', 'ibh3', 'ibh5', 'ibh6']);
                    break;
                case 'Telegram':
                    whatsappLink = getWhatsAppLink(deviceID, ['tbh1', 'tbh3', 'tbh5', 'tbh6']);
                    break;
                default:
                    whatsappLink = getWhatsAppLink(deviceID, ['nbh1', 'nbh3', 'nbh5', 'nbh6']);
            }

            // Redireciona para o link do WhatsApp correspondente
            window.location.href = whatsappLink;
        }

        // Função para obter o ID do dispositivo (simulada)
        function getDeviceID() {
            // Você pode implementar esta função de acordo com sua necessidade, como a obtenção do ID do dispositivo do usuário
            // Por exemplo:
            return '123456789'; // Simulação de um ID de dispositivo
        }

        // Função para obter o canal de acesso (simulada)
        function getAccessChannel() {
            // Você pode implementar esta função para detectar o canal de acesso do usuário (Facebook, Instagram, Telegram ou navegador)
            // Por exemplo:
            return 'Facebook'; // Simulação de acesso via Facebook
        }

        // Função para obter o link do WhatsApp correspondente
        function getWhatsAppLink(deviceID, whatsappLinks) {
            var storedLink = getStoredWhatsAppLink(deviceID); // Obtém o link do WhatsApp armazenado para este dispositivo

            // Se o link do WhatsApp estiver armazenado, retorna-o, caso contrário, escolhe um novo aleatoriamente
            if (storedLink) {
                return storedLink;
            } else {
                var randomIndex = Math.floor(Math.random() * whatsappLinks.length);
                var chosenWhatsApp = whatsappLinks[randomIndex];
                setStoredWhatsAppLink(deviceID, chosenWhatsApp); // Armazena o link do WhatsApp para este dispositivo
                return 'https://typebot.co/' + chosenWhatsApp;
            }
        }

        // Função para obter o link do WhatsApp armazenado para o dispositivo
        function getStoredWhatsAppLink(deviceID) {
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", "client_data.txt", false);
            xhttp.send();
            var clientData = xhttp.responseText;
            var dataLines = clientData.split("\n");
            for (var i = 0; i < dataLines.length; i++) {
                var line = dataLines[i].split(",");
                if (line[0] === deviceID) {
                    return line[1];
                }
            }
            return null;
        }

        // Função para armazenar o link do WhatsApp para o dispositivo
        function setStoredWhatsAppLink(deviceID, whatsappLink) {
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", "client_data.txt", false);
            xhttp.send();
            var clientData = xhttp.responseText;
            var newData = "";
            var dataLines = clientData.split("\n");
            for (var i = 0; i < dataLines.length; i++) {
                var line = dataLines[i].split(",");
                if (line[0] === deviceID) {
                    line[1] = whatsappLink;
                }
                newData += line.join(",") + "\n";
            }
            xhttp.open("POST", "client_data.txt", false);
            xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhttp.send("data=" + newData);
        }
    </script>
</body>
</html>
